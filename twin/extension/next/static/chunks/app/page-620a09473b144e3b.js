(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{7322:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>a});var t=s(5155),n=s(2115);let a=()=>{let[e,r]=(0,n.useState)(null),[s,a]=(0,n.useState)(!0),[i,d]=(0,n.useState)(!0),[c,l]=(0,n.useState)(""),[o,m]=(0,n.useState)(!1),[u,g]=(0,n.useState)("");(0,n.useEffect)(()=>{x()},[]);let x=async()=>{try{"undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.sendMessage&&(chrome.runtime.sendMessage({type:"GET_USER"},e=>{e&&e.user&&r(e.user)}),chrome.runtime.sendMessage({type:"GET_TRACKING_STATUS"},e=>{e&&a(e.enabled)}))}catch(e){console.error("Error loading data:",e)}finally{d(!1)}},h=async e=>{if(e.preventDefault(),c.trim()){m(!0),g("");try{"undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.sendMessage?chrome.runtime.sendMessage({type:"LOGIN",email:c.trim()},e=>{m(!1),e&&e.success?(r(e.user),l(""),g(e.isNew?"Account created and logged in!":"Logged in successfully!")):g("Login failed: "+((null==e?void 0:e.error)||"Unknown error"))}):(m(!1),g("Extension not available"))}catch(e){m(!1),g("Login error: "+e)}}},b=async()=>{try{"undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.sendMessage&&chrome.runtime.sendMessage({type:"LOGOUT"},e=>{e&&e.success&&(r(null),g("Logged out successfully"))})}catch(e){g("Logout error: "+e)}},y=async()=>{let e=!s;a(e);try{"undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.sendMessage&&chrome.runtime.sendMessage({type:"TOGGLE_TRACKING",enabled:e})}catch(e){console.error("Error toggling tracking:",e)}};return i?(0,t.jsx)("div",{className:"w-80 h-96 p-4 bg-white",children:(0,t.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,t.jsx)("div",{className:"text-gray-500",children:"Loading..."})})}):(0,t.jsxs)("div",{className:"w-80 h-96 p-4 bg-white",children:[(0,t.jsx)("div",{className:"mb-4 pb-2 border-b",children:(0,t.jsx)("h1",{className:"text-lg font-bold text-gray-800",children:"Twin Tracker"})}),u&&(0,t.jsx)("div",{className:"text-xs p-2 rounded mb-3 ".concat(u.includes("error")||u.includes("failed")?"bg-red-50 text-red-700 border border-red-200":"bg-green-50 text-green-700 border border-green-200"),children:u}),!e&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600 text-center",children:"Please log in to start tracking your activity"}),(0,t.jsxs)("form",{onSubmit:h,className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),(0,t.jsx)("input",{type:"email",value:c,onChange:e=>l(e.target.value),placeholder:"Enter your email",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",required:!0,disabled:o})]}),(0,t.jsx)("button",{type:"submit",disabled:o||!c.trim(),className:"w-full bg-blue-500 text-white py-2 px-4 rounded-md text-sm font-medium hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:o?"Logging in...":"Login / Sign Up"})]})]}),e&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-800",children:"Logged in as:"}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:e.email})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-800",children:"Activity Tracking"}),(0,t.jsx)("div",{className:"text-xs text-gray-600",children:s?"Currently tracking your browsing":"Tracking is paused"})]}),(0,t.jsx)("button",{onClick:y,className:"w-12 h-6 rounded-full transition-colors ".concat(s?"bg-green-500":"bg-gray-300"),children:(0,t.jsx)("div",{className:"w-5 h-5 bg-white rounded-full transition-transform ".concat(s?"translate-x-6":"translate-x-0.5")})})]}),(0,t.jsx)("div",{className:"text-xs p-2 rounded text-center ".concat(s?"bg-green-50 text-green-700 border border-green-200":"bg-yellow-50 text-yellow-700 border border-yellow-200"),children:s?"\uD83D\uDFE2 Actively tracking searches and browsing":"⏸️ Tracking paused"}),(0,t.jsx)("button",{onClick:b,className:"w-full bg-gray-500 text-white py-2 px-4 rounded-md text-sm font-medium hover:bg-gray-600",children:"Logout"})]}),(0,t.jsx)("div",{className:"text-xs text-gray-400 text-center mt-4 pt-2 border-t",children:"Twin v0.0.1 - Activity Tracker"})]})}},7424:(e,r,s)=>{Promise.resolve().then(s.bind(s,7322))}},e=>{e.O(0,[441,255,358],()=>e(e.s=7424)),_N_E=e.O()}]);